==  权限定义和管理 ==
系统权限模块由角色、用户和权限构成，角色定义了具有哪些操作权限，一个用户必须属于某一角色。可指定不同用户访问不同的区域。


系统中操作权限如下：
权限由32个二进制位组成,每8位位一个区域.\\  
低8位(第一个区)作为管理权限使用,第二个低8位(第二个区)分配给区域权限使用\\
其他区域暂时保留:  
账户权限(第一个低8位区):
||= '''权限分类''' =||= '''权限内容''' =||= '''权限位置(由低位到高位)''' =||
|| 区域管理    || 1.添加/删除区域 \\  2.用户创建了一个区域,默认这个用户具有这个区域的管理权限 || 0 ||
|| 模型管理 || 系统模型,设备模型,以及配置项管理(被引用时拒绝删除) || 1 ||
|| 可视化页面管理 || 可视化页面的创建、组态、保存、修改、发布及删除等操作 || 2 ||
|| 用户管理 || 创建用户、删除用户、为用户指定账户角色|| 3 ||
|| 角色管理 || 创建、修改、删除角色，指定角色具备的权限 || 4 ||

区域权限(第二个低8位区):
||= '''权限分类''' =||= '''权限内容''' =||= '''权限位置(由低位到高位)''' =||
|| 读数据 || 1.读取实时数据 \\  2.读取历史数据 || 0 ||
|| 写数据 || 写实时数据 || 1 ||
|| 查看报警 || 1.查看实时报警\\ 2.查看历史报警 || 2 ||
|| 确认报警 || 确认并关闭报警 || 3 ||
|| 系统管理 || 系统的添加,修改删除 || 4 ||
|| 区域用户管理 || 指定用户在当前区域下的区域角色，或将其它用户从当前区域中删除 || 5 ||
|| 可视化页面查看 || 可视化页面的查看及操作 || 6 ||



角色分为账户角色和区域角色两种，一个用户只能有一个账户角色，但针对每个区域可以有一个不同的区域角色。

默认的账户角色及权限如下
||= '''角色''' =||= '''区域管理''' =||= '''模板及配置项管理''' =||= '''可视化管理''' =||= '''用户管理''' =||= '''角色管理''' =||= '''权限码''' =||
||= 管理员 || 1 || 1 || 1 || 1 || 1 ||  31 ||
||= 区域管理员 || 1 || 0 || 0 || 1 || 0 ||  9 ||
||= 工程师 || 0 || 1 || 1 || 0 || 0 || 6 || 
||= 区域用户 || 0 || 0 || 0 || 0 || 0 ||  0 ||
默认的区域角色及权限如下
||= '''角色''' =||= '''读数据''' =||= '''写数据''' =||= '''查看报警''' =||= '''确认报警''' =||= '''系统管理''' =||= '''可视化查看''' =||= 区域用户管理  =||= '''权限码''' =||
||= 区域主管 =|| 1 || 1 || 1 || 1 || 1 || 1 || 1 || 32512 ||
||= 操作员 =|| 1 || 1 || 1 || 1 || 0 || 1 || 0 || 20224 ||
||= 普通用户 =|| 1 || 0 || 1 || 0 || 0 || 1 || 0 || 17664 ||

对于权限的要求：
1. 建立account时设置的用户用户为超级用户，具有系统中一切权限。
2. 具备“用户管理”权限的用户所创建的新用户，对其赋予的权限不能超过创建它的用户本身。
3. 用户创建区域后，会自动具备该区域的所有权限，即成为该区域的区域主管角色。


==  token内容 ==
||= '''内容''' =||= '''备注''' =|| 
|| accesskey   || accesskey   ||
|| account_id  || account id  || 
|| supper_user || true/false,是否是超级用户 ||
||account_scope || 账户权限权限码,超级用户时此参数不是必须的\\管理员账户时,具有一切管理账户权限  || 
|| area_scope || {area_id_1:752,area_id_2:777}\\权限对象,key为区域id,value为对应这个区域的权限 ||
> 当supper_user为true,即当前用户为超级用户时,account_scope,area_scope参数都可不必保存.
> 超级用户在创建账户时角色id指定为0
== 接口定义 ==
=== 区域相关 ===
* 创建区域
* 修改区域信息
* 获取区域信息
* 查询区域信息
=== 角色相关 ===
* 添加预定义角色
> 对于预订义角色,每一个角色都有默认的权限,并且这个权限是最高权限
> 添加预定义角色为私有接口,预定义角色id固定在[1-18]内指定
> 预定义角色权限固定,不可修改,不区分account,平台共用
> 预订义角色操作是内部使用的接口,外部只有只读权限
* 添加角色
> 具有区域管理权限的角色创建一个区域后就拥有了这个区域的区域主管权限
* 修改角色的权限
> 修改角色权限时,它所能修改的权限不能超过自身最大权限
* 获取指定角色信息
* 删除指定的角色
> 预定义角色不能删除,在删除账户的时候自动删除

* 查询所有角色
=== 区域用户相关 ===
* 添加一个用户到某个区域,即指定用户在某个区域的区域角色
* 获取某个用户在所有区域所拥有的角色信息,即可获取在用户在不同区域的权限
* 从某个区域删除某个用户,即此用户在这个区域没有了权限


